# query tokenTransfers(
#   $filter: TransfersFilter!
#   $limit: Int = 10
#   $cursor: String
#   $includeERC721Metadata: Boolean = false
#   $includeFromProfile: Boolean = false
#   $includeFromReverseProfile: Boolean = false
#   $includeFromTokensInfo: Boolean = false
#   $fromTokensLimit: Int = 10
#   $fromTokensFilterSuspectedScam: Boolean = false
#   $includeToProfile: Boolean = false
#   $includeToReverseProfile: Boolean = false
#   $includeToTokensInfo: Boolean = false
#   $toTokensLimit: Int = 10
#   $toTokensFilterSuspectedScam: Boolean = false
# ) {
#   tokenTransfers(filter: $filter, limit: $limit, cursor: $cursor) {
#     nextCursor
#     tokenTransfers {
#       blockTimestamp
#       hash
#       id
#       token
#       erc721Metadata @include(if: $includeERC721Metadata) {
#         ...TokenInfo
#       }
#       from {
#         address
#         profile @include(if: $includeFromProfile) {
#           ...GlobalKeys
#         }
#         reverseProfile @include(if: $includeFromReverseProfile) {
#           ...GlobalKeys
#         }
#         tokens(
#           limit: $fromTokensLimit
#           filter: { filterSuspectedScams: $fromTokensFilterSuspectedScam }
#         ) @include(if: $includeFromTokensInfo) {
#           ...TokenInfo
#         }
#       }
#       to {
#         address
#         profile @include(if: $includeToProfile) {
#           ...GlobalKeys
#         }
#         reverseProfile @include(if: $includeToReverseProfile) {
#           ...GlobalKeys
#         }
#         tokens(
#           limit: $toTokensLimit
#           filter: { filterSuspectedScams: $toTokensFilterSuspectedScam }
#         ) @include(if: $includeToTokensInfo) {
#           ...TokenInfo
#         }
#       }
#     }
#   }
# }

query address(
  $address: String!
  $tokensLimit: Int = 10
  $includeProfile: Boolean = false
  $includeReverseProfile: Boolean = false
  $includeTokens: Boolean = false
  $includeTokenUri: Boolean = false
  $includeMintInfo: Boolean = false
  $includeMediaInfo: Boolean = false
  $includeTransactionLogs: Boolean = false
  $includeSales: Boolean = false
  $includeMakerReverseProfile: Boolean = false
  $includeTakerReverseProfile: Boolean = false
  $includeTransactionRecipientInfo: Boolean = false
  $includeTransactionSenderInfo: Boolean = false
) {
  address(address: $address) {
    address
    profile @include(if: $includeProfile) {
      ...GlobalKeys
    }
    reverseProfile @include(if: $includeReverseProfile) {
      ...GlobalKeys
    }
    tokens(limit: $tokensLimit) @include(if: $includeTokens) {
      ...NonFungibleTokenInfo
      ...NonFungibleTokenMediaInfo @include(if: $includeMediaInfo)
      ...NonFungibleTokenSaleInfo @include(if: $includeSales)
      ...NonFungibleTokenMintInfo @include(if: $includeMintInfo)
      tokenUri @include(if: $includeTokenUri)
    }
  }
}

query token(
  $contract: String!
  $tokenId: String!
  $includeOwnerInfo: Boolean = false
  $includeOwnerProfile: Boolean = false
  $includeOwnerReverseProfile: Boolean = false
  $includeTokenUri: Boolean = false
  $includeMintInfo: Boolean = false
  $includeMediaInfo: Boolean = false
  $includeTransactionLogs: Boolean = false
  $includeSales: Boolean = false
  $includeMakerReverseProfile: Boolean = false
  $includeTakerReverseProfile: Boolean = false
  $includeTransactionRecipientInfo: Boolean = false
  $includeTransactionSenderInfo: Boolean = false
) {
  token(contract: $contract, tokenId: $tokenId) {
    ...NonFungibleTokenInfo
    ...NonFungibleTokenOwnerInfo @include(if: $includeOwnerInfo)
    ...NonFungibleTokenMediaInfo @include(if: $includeMediaInfo)
    ...NonFungibleTokenSaleInfo @include(if: $includeSales)
    ...NonFungibleTokenMintInfo @include(if: $includeMintInfo)
    tokenUri @include(if: $includeTokenUri)
  }
}

query tokens(
  $filter: TokensFilter
  $limit: Int = 50
  $before: String
  $after: String
  $includeTotalCount: Boolean = false
  $includeOwnerInfo: Boolean = false
  $includeOwnerProfile: Boolean = false
  $includeOwnerReverseProfile: Boolean = false
  $includeTokenUri: Boolean = false
  $includeMintInfo: Boolean = false
  $includeMediaInfo: Boolean = false
  $includeTransactionLogs: Boolean = false
  $includeTransactionSenderInfo: Boolean = false
  $includeTransactionRecipientInfo: Boolean = false
  $includeSales: Boolean = false
  $includeMakerReverseProfile: Boolean = false
  $includeTakerReverseProfile: Boolean = false
) {
  tokens(filter: $filter, limit: $limit, before: $before, after: $after) {
    cursors {
      before
      after
    }
    totalCount @include(if: $includeTotalCount)
    tokens {
      ...NonFungibleTokenInfo
      ...NonFungibleTokenOwnerInfo @include(if: $includeOwnerInfo)
      ...NonFungibleTokenMediaInfo @include(if: $includeMediaInfo)
      ...NonFungibleTokenSaleInfo @include(if: $includeSales)
      ...NonFungibleTokenMintInfo @include(if: $includeMintInfo)
      tokenUri @include(if: $includeTokenUri)
    }
  }
}

query transaction(
  $hash: String!
  $includeTransactionLogs: Boolean = false
  $includeTransactionRecipientInfo: Boolean = false
  $includeTransactionSenderInfo: Boolean = false
) {
  transaction(hash: $hash) {
    ...TransactionInfo
  }
}

fragment NonFungibleTokenMintInfo on NonFungibleToken {
  mintPrice
  mintTransaction {
    ...TransactionInfo
  }
}

fragment TransactionInfo on Transaction {
  blockNumber
  blockTimestamp
  effectiveGasPrice
  events {
    transactionHash
  }
  gas
  gasPaid
  gasUsed
  gasPrice
  hash
  id
  index
  input
  from @include(if: $includeTransactionSenderInfo) {
    address
    reverseProfile {
      ...GlobalKeys
    }
  }
  to @include(if: $includeTransactionRecipientInfo) {
    address
    reverseProfile {
      ...GlobalKeys
    }
  }
  value
  methodId
  status
  logs @include(if: $includeTransactionLogs) {
    data
    logIndex
    removed
    topics
  }
}

fragment NonFungibleTokenSaleInfo on NonFungibleToken {
  sales {
    currencyContract {
      address
    }
    eventIndex
    logIndex
    maker {
      address
      reverseProfile @include(if: $includeMakerReverseProfile) {
        ...GlobalKeys
      }
    }
    marketplace
    marketplaceContract {
      address
    }
    price
    taker {
      address
      reverseProfile @include(if: $includeTakerReverseProfile) {
        ...GlobalKeys
      }
    }
  }
}

fragment NonFungibleTokenOwnerInfo on NonFungibleToken {
  owner {
    address
    profile @include(if: $includeOwnerProfile) {
      ...GlobalKeys
    }
    reverseProfile @include(if: $includeOwnerReverseProfile) {
      ...GlobalKeys
    }
  }
}

fragment NonFungibleTokenMediaInfo on NonFungibleToken {
  animation {
    ...MediaInfo
  }
  image {
    ...MediaInfo
  }
  imageStorageType
  backgroundColor
  youtubeUrl
}

fragment NonFungibleTokenInfo on NonFungibleToken {
  contract
  description
  name
  tokenId
  externalUrl
}

fragment MediaInfo on Media {
  blurhash
  checksum
  height
  width
  url
  smallUrl
  thumbnailUrl
  largeUrl
  mimeType
}

fragment GlobalKeys on Profile {
  name
  avatar: text(key: "avatar")
}
